<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Unit 8: FILMS - Full Textbook Content</title>
<style>
    :root {
        --primary: #4338ca;
        --secondary: #3b82f6;
        --accent: #f59e0b;
        --text: #1e293b;
        --bg: #f8fafc;
        --white: #ffffff;
        --correct: #10b981;
        --wrong: #ef4444;
    }
    * { box-sizing: border-box; font-family: 'Segoe UI', system-ui, sans-serif; }
    body { margin: 0; background: var(--bg); color: var(--text); padding-bottom: 100px; }

    /* HEADER */
    header {
        background: var(--white); padding: 15px; position: sticky; top: 0; z-index: 50;
        border-bottom: 1px solid #e2e8f0; display: flex; justify-content: space-between; align-items: center;
        box-shadow: 0 4px 6px -1px rgba(0,0,0,0.05);
    }
    .brand h1 { font-size: 18px; font-weight: 800; color: var(--primary); margin: 0; }
    .brand span { font-size: 12px; color: #64748b; }
    .score-badge { background: var(--text); color: var(--white); padding: 5px 12px; border-radius: 20px; font-weight: bold; font-size: 14px; }

    /* NAVIGATION */
    .nav-bar {
        display: flex; gap: 10px; overflow-x: auto; padding: 10px 15px; background: var(--white);
        border-bottom: 1px solid #e2e8f0; scrollbar-width: none;
    }
    .nav-item {
        flex: 0 0 auto; padding: 8px 16px; border-radius: 20px; border: 1px solid #cbd5e1;
        background: var(--white); font-size: 13px; font-weight: 600; color: #475569; cursor: pointer; transition: 0.2s;
    }
    .nav-item.active { background: var(--primary); color: var(--white); border-color: var(--primary); }

    /* CONTENT CONTAINER */
    .container { max-width: 800px; margin: 0 auto; padding: 15px; }

    /* SECTION BOXES */
    .section-box {
        background: var(--white); border-radius: 16px; padding: 20px; margin-bottom: 20px;
        box-shadow: 0 1px 3px rgba(0,0,0,0.05); border: 1px solid #e2e8f0;
    }
    .sec-title { font-size: 18px; font-weight: 700; color: var(--primary); margin-bottom: 5px; }
    .sec-desc { font-size: 13px; color: #64748b; margin-bottom: 15px; }

    /* READING & AUDIO CONTENT */
    .content-block {
        background: #f0f9ff; border-left: 4px solid var(--secondary); padding: 15px;
        border-radius: 8px; margin-bottom: 20px; font-size: 15px; line-height: 1.6;
    }
    .dialogue-line { margin-bottom: 8px; }
    .char { font-weight: bold; color: var(--primary); margin-right: 5px; }
    .audio-controls { display: flex; align-items: center; gap: 10px; margin-bottom: 10px; }
    .btn-audio {
        width: 40px; height: 40px; border-radius: 50%; border: none; background: var(--secondary);
        color: white; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 18px;
    }

    /* QUESTIONS */
    .q-item { margin-bottom: 25px; border-bottom: 1px dashed #e2e8f0; padding-bottom: 20px; }
    .q-item:last-child { border: none; }
    .q-main { font-weight: 600; font-size: 16px; margin-bottom: 8px; }
    .q-vi { font-size: 14px; color: #64748b; font-style: italic; margin-bottom: 12px; display: none; }
    .show-trans .q-vi { display: block; }

    /* OPTIONS */
    .opt-grid { display: grid; gap: 8px; }
    .opt-btn {
        text-align: left; padding: 12px 16px; border: 2px solid #e2e8f0; border-radius: 10px;
        background: var(--white); font-size: 15px; cursor: pointer; transition: 0.2s;
        display: flex; align-items: center; justify-content: space-between;
    }
    .opt-btn:hover { background: #f8fafc; border-color: #cbd5e1; }
    .opt-btn.selected { border-color: var(--primary); background: #eef2ff; color: var(--primary); font-weight: 600; }
    .opt-btn.correct { border-color: var(--correct); background: #ecfdf5; color: #065f46; }
    .opt-btn.wrong { border-color: var(--wrong); background: #fef2f2; color: #991b1b; }

    /* FEEDBACK */
    .feedback {
        margin-top: 12px; padding: 12px; border-radius: 8px; font-size: 14px; line-height: 1.5;
        display: none; animation: slideIn 0.3s;
    }
    .feedback.is-correct { background: #f0fdf4; border: 1px solid #bbf7d0; color: #166534; }
    .feedback.is-wrong { background: #fef2f2; border: 1px solid #fecaca; color: #991b1b; }
    @keyframes slideIn { from { opacity: 0; transform: translateY(-5px); } to { opacity: 1; transform: translateY(0); } }

    /* FOOTER */
    .footer {
        position: fixed; bottom: 0; left: 0; right: 0; background: var(--white);
        padding: 12px 16px; border-top: 1px solid #e2e8f0; display: flex; gap: 10px; z-index: 100;
    }
    .btn { flex: 1; padding: 12px; border: none; border-radius: 10px; font-weight: 700; cursor: pointer; font-size: 16px; }
    .btn-primary { background: var(--primary); color: white; box-shadow: 0 4px 10px rgba(67, 56, 202, 0.2); }
    .btn-secondary { background: var(--white); border: 2px solid #e2e8f0; color: #64748b; flex: 0 0 60px; font-size: 20px; }

</style>
</head>
<body>

<header>
    <div class="brand">
        <h1>UNIT 8: FILMS</h1>
        <span>Global Success 7</span>
    </div>
    <div class="score-badge" id="scoreDisplay">0/0</div>
</header>

<div class="nav-bar" id="navBar"></div>

<div class="container" id="mainContent"></div>

<div class="footer">
    <button class="btn btn-secondary" onclick="toggleTrans()" title="Hi·ªán d·ªãch ti·∫øng Vi·ªát">üáªüá≥</button>
    <button class="btn btn-primary" onclick="checkAnswers()">CHECK / KI·ªÇM TRA</button>
</div>

<script>
/* ========================================================================
   FULL DATASET: UNIT 8 (PAGES 82-91)
   ======================================================================== */
const UNIT_DATA = [
    {
        id: "p1",
        title: "1. Getting Started",
        desc: "Listen and Read (Page 82-83)",
        script: [
            {r:"Mark", g:"m", t:"Let's go to the cinema tonight!"},
            {r:"Mi", g:"f", t:"Good idea! What shall we see?"},
            {r:"Mark", g:"m", t:"A Nightmare is on at Sao Mai Cinema tonight."},
            {r:"Mi", g:"f", t:"Is it a fantasy?"},
            {r:"Mark", g:"m", t:"No, it's a horror film."},
            {r:"Mi", g:"f", t:"That's too scary for me. Look! An Old Pier is on at Town Cinema. It's a documentary."},
            {r:"Mark", g:"m", t:"I don't really like documentaries. They're often boring. What about Our Holiday?"},
            {r:"Mi", g:"f", t:"What kind of film is it?"},
            {r:"Mark", g:"m", t:"It's a comedy."},
            {r:"Mi", g:"f", t:"And who stars in it?"},
            {r:"Mark", g:"m", t:"Kate Harrison and Lily Collins."},
            {r:"Mi", g:"f", t:"Um, they're pretty good. What's it about?"},
            {r:"Mark", g:"m", t:"It's about two women living in different countries and they decide to exchange houses."},
            {r:"Mi", g:"f", t:"What are the reviews like?"},
            {r:"Mark", g:"m", t:"Well, although a few people say it's a bit silly, most say it's funny and interesting."}
        ],
        questions: [
            {q: "Ex 2: What does Mark suggest doing tonight?", vi: "Mark g·ª£i √Ω l√†m g√¨ t·ªëi nay?", opts: ["Watching a TV show", "Watching a film", "Staying at home"], a: 1, exp: "Mark n√≥i: 'Let's go to the cinema tonight!'"},
            {q: "Ex 2: Why doesn't Mark want to see 'An Old Pier'?", vi: "T·∫°i sao Mark kh√¥ng mu·ªën xem 'An Old Pier'?", opts: ["He doesn't like that type of film", "It's not convenient", "He saw it last week"], a: 0, exp: "Mark n√≥i: 'I don't really like documentaries. They're often boring.'"},
            {q: "Ex 2: The word 'reviews' mostly means:", vi: "T·ª´ 'reviews' nghƒ©a l√†:", opts: ["opinions about a film", "interesting scenes", "what people don't like"], a: 0, exp: "Reviews = Opinions (√ù ki·∫øn ƒë√°nh gi√°)."},
            {q: "Ex 2: What do people think of 'Our Holiday'?", vi: "M·ªçi ng∆∞·ªùi nghƒ© g√¨ v·ªÅ phim 'Our Holiday'?", opts: ["Everyone likes it", "No one likes it", "Most people like it"], a: 2, exp: "Mark n√≥i: '...most say it's funny and interesting'."},
            
            {q: "Ex 3: A film that tries to make the audience laugh is a ______.", vi: "Phim g√¢y c∆∞·ªùi l√†...", opts: ["Comedy", "Documentary", "Sci-fi"], a: 0, exp: "Comedy = Phim h√†i."},
            {q: "Ex 3: A film based only on imagination, not real facts, is a ______.", vi: "Phim d·ª±a tr√™n t∆∞·ªüng t∆∞·ª£ng...", opts: ["Documentary", "Fantasy", "Drama"], a: 1, exp: "Fantasy = Phim gi·∫£ t∆∞·ªüng."},
            {q: "Ex 3: A film that shows real life events or stories is a ______.", vi: "Phim chi·∫øu s·ª± ki·ªán ƒë·ªùi th·ª±c...", opts: ["Documentary", "Horror film", "Action"], a: 0, exp: "Documentary = Phim t√†i li·ªáu."},
            {q: "Ex 3: A film set in the future, often about science, is a ______.", vi: "Phim b·ªëi c·∫£nh t∆∞∆°ng lai...", opts: ["Cartoon", "Science fiction film", "Fantasy"], a: 1, exp: "Science fiction film = Phim khoa h·ªçc vi·ªÖn t∆∞·ªüng."},
            {q: "Ex 3: A film in which strange and frightening things happen is a ______.", vi: "Phim c√≥ nh·ªØng th·ª© ƒë√°ng s·ª£...", opts: ["Horror film", "Comedy", "Thriller"], a: 0, exp: "Horror film = Phim kinh d·ªã."},

            {q: "Ex 4: Going to the hospital can be ______ for a child.", vi: "ƒêi vi·ªán c√≥ th·ªÉ ___ v·ªõi tr·∫ª.", opts: ["funny", "frightening", "moving"], a: 1, exp: "Frightening = ƒê√°ng s·ª£."},
            {q: "Ex 4: The film was so ______ that the audience couldn't stop laughing.", vi: "Phim qu√° ___ khi·∫øn kh√°n gi·∫£ c∆∞·ªùi m√£i.", opts: ["boring", "funny", "shocking"], a: 1, exp: "Funny = H√†i h∆∞·ªõc."},
            {q: "Ex 4: Many people cried when they saw the ______ scenes.", vi: "Nhi·ªÅu ng∆∞·ªùi kh√≥c khi xem c·∫£nh...", opts: ["moving", "violent", "dull"], a: 0, exp: "Moving = C·∫£m ƒë·ªông."},
            {q: "Ex 4: The film was so ______ that we fell asleep.", vi: "Phim qu√° ___ n√™n ch√∫ng t√¥i ng·ªß g·∫≠t.", opts: ["interesting", "boring", "exciting"], a: 1, exp: "Boring = Nh√†m ch√°n."},
            {q: "Ex 4: This book is ______. I got a lot of useful information.", vi: "S√°ch r·∫•t ___. T√¥i c√≥ nhi·ªÅu th√¥ng tin.", opts: ["interesting", "dull", "frightening"], a: 0, exp: "Interesting = Th√∫ v·ªã, b·ªï √≠ch."}
        ]
    },
    {
        id: "p2",
        title: "2. A Closer Look 1",
        desc: "Vocabulary & Pronunciation (Page 84)",
        questions: [
            {q: "Ex 1 (Match): 'Dull' means...", vi: "'Dull' nghƒ©a l√†...", opts: ["Giving pleasure", "Not interesting or exciting", "Difficult to understand"], a: 1, exp: "Dull = Boring (T·∫ª nh·∫°t)."},
            {q: "Ex 1 (Match): 'Violent' means...", vi: "'Violent' nghƒ©a l√†...", opts: ["Very surprising", "Containing fighting and killing", "Giving pleasure"], a: 1, exp: "Violent = B·∫°o l·ª±c."},
            {q: "Ex 1 (Match): 'Confusing' means...", vi: "'Confusing' nghƒ©a l√†...", opts: ["Difficult to understand", "Frightening", "Funny"], a: 0, exp: "Confusing = Kh√≥ hi·ªÉu."},
            {q: "Ex 1 (Match): 'Shocking' means...", vi: "'Shocking' nghƒ©a l√†...", opts: ["Very surprising/unbelievable", "Boring", "Emotional"], a: 0, exp: "Shocking = G√¢y s·ªëc."},
            {q: "Ex 1 (Match): 'Enjoyable' means...", vi: "'Enjoyable' nghƒ©a l√†...", opts: ["Giving pleasure", "Making you cry", "Scary"], a: 0, exp: "Enjoyable = Th√∫ v·ªã."},

            {q: "Ex 2: The film 'A Polluted Planet' is hard to believe. It's a ______ documentary.", vi: "Phim kh√≥ tin -> ...", opts: ["dull", "shocking", "funny"], a: 1, exp: "Hard to believe -> Shocking."},
            {q: "Ex 2: The film was so ______ that we almost fell asleep.", vi: "Phim qu√° ___ n√™n su√Ωt ng·ªß.", opts: ["dull", "violent", "gripping"], a: 0, exp: "Fell asleep -> Dull."},
            {q: "Ex 2: I think you will enjoy 'Our Holiday'. It's quite ______.", vi: "B·∫°n s·∫Ω th√≠ch n√≥. N√≥ kh√°...", opts: ["shocking", "confusing", "enjoyable"], a: 2, exp: "Enjoy -> Enjoyable."},
            {q: "Ex 2: There were too many fights in the film. It was too ______.", vi: "Qu√° nhi·ªÅu ƒë√°nh nhau -> ...", opts: ["violent", "moving", "dull"], a: 0, exp: "Fights -> Violent."},
            {q: "Ex 2: I didn't understand the film. It was very ______.", vi: "Kh√¥ng hi·ªÉu phim. N√≥ r·∫•t...", opts: ["confusing", "entertaining", "frightening"], a: 0, exp: "Didn't understand -> Confusing."},

            {q: "Pronunciation: Which word has the sound /…™…ô/?", vi: "T·ª´ n√†o ch·ª©a √¢m /…™…ô/?", opts: ["Idea", "Bear", "Air"], a: 0, exp: "Idea /a…™Ààd…™…ô/."},
            {q: "Pronunciation: Which word has the sound /e…ô/?", vi: "T·ª´ n√†o ch·ª©a √¢m /e…ô/?", opts: ["Really", "Chair", "Ear"], a: 1, exp: "Chair /t Ée…ô/."}
        ]
    },
    {
        id: "p3",
        title: "3. A Closer Look 2",
        desc: "Grammar: Although/However (Page 85-86)",
        questions: [
            {q: "Ex 1: ______ the questions were very difficult, he solved them easily.", vi: "___ c√¢u h·ªèi kh√≥, anh ·∫•y gi·∫£i d·ªÖ d√†ng.", opts: ["Although", "However", "Because"], a: 0, exp: "Although + Clause (S+V)."},
            {q: "Ex 1: He was a great actor. ______, he never played a leading role.", vi: "Di·ªÖn vi√™n gi·ªèi. ___, ch∆∞a ƒë√≥ng vai ch√≠nh.", opts: ["Although", "However", "So"], a: 1, exp: "However ƒë·ª©ng ƒë·∫ßu c√¢u 2, sau d·∫•u ch·∫•m."},
            {q: "Ex 1: ______ they spent a lot of money on the film, it wasn't a big success.", vi: "___ ti√™u nhi·ªÅu ti·ªÅn, phim kh√¥ng th√†nh c√¥ng.", opts: ["However", "Although", "But"], a: 1, exp: "Although + Clause."},
            {q: "Ex 1: The film was a comedy. ______, I didn't find it funny at all.", vi: "Phim h√†i. ___, t√¥i kh√¥ng th·∫•y vui.", opts: ["Although", "However", "So"], a: 1, exp: "However ch·ªâ s·ª± t∆∞∆°ng ph·∫£n gi·ªØa 2 c√¢u."},
            {q: "Ex 1: ______ we played well, we couldn't win the match.", vi: "___ ch∆°i t·ªët, ch√∫ng t√¥i kh√¥ng th·∫Øng.", opts: ["Although", "However", "Because"], a: 0, exp: "Although + Clause."},

            {q: "Ex 2: ______ the acting was good, I didn't like the story.", vi: "___ di·ªÖn xu·∫•t t·ªët, t√¥i kh√¥ng th√≠ch truy·ªán.", opts: ["Although", "However", "But"], a: 0, exp: "Although + Clause."},
            {q: "Ex 2: I felt really tired. ______, I went to see the film.", vi: "T√¥i m·ªát. ___, t√¥i v·∫´n ƒëi xem phim.", opts: ["Although", "However", "So"], a: 1, exp: "However n·ªëi 2 c√¢u."},
            {q: "Ex 2: I really enjoyed the film ______ most of my friends didn't like it.", vi: "T√¥i th√≠ch phim ___ b·∫°n t√¥i kh√¥ng th√≠ch.", opts: ["although", "however", "so"], a: 0, exp: "Although n·ªëi 2 m·ªánh ƒë·ªÅ."},
            {q: "Ex 2: He studied hard. ______, he failed the exam.", vi: "H·ªçc chƒÉm. ___, v·∫´n tr∆∞·ª£t.", opts: ["Although", "However", "Because"], a: 1, exp: "However."},
            {q: "Ex 2: Mai speaks English well ______ her native language is Vietnamese.", vi: "Mai n√≥i TA gi·ªèi ___ ti·∫øng m·∫π ƒë·∫ª l√† TV.", opts: ["although", "however", "and"], a: 0, exp: "Although."},

            {q: "Ex 4: Mary overslept ______ she went to bed early.", vi: "Ng·ªß qu√™n ___ ƒë√£ ng·ªß s·ªõm.", opts: ["although", "because", "so"], a: 0, exp: "Contrast: overslept vs bed early."},
            {q: "Ex 4: ______ the sun is shining, it isn't very warm.", vi: "___ tr·ªùi n·∫Øng, nh∆∞ng kh√¥ng ·∫•m.", opts: ["Because", "However", "Though"], a: 2, exp: "Though = Although."},
            {q: "Ex 4: I don't like running. ______, I like swimming.", vi: "Kh√¥ng th√≠ch ch·∫°y. ___, th√≠ch b∆°i.", opts: ["But", "So", "However"], a: 2, exp: "However."},
            {q: "Ex 4: ______ the film was exciting, Jim fell asleep.", vi: "___ phim hay, Jim v·∫´n ng·ªß g·∫≠t.", opts: ["However", "Although", "Because"], a: 1, exp: "Although."},
            {q: "Ex 4: The story is silly. ______, many people enjoyed it.", vi: "Truy·ªán ng·ªõ ng·∫©n. ___, nhi·ªÅu ng∆∞·ªùi v·∫´n th√≠ch.", opts: ["However", "Though", "But"], a: 0, exp: "However."}
        ]
    },
    {
        id: "p4",
        title: "4. Communication",
        desc: "Everyday English & Survey (Page 86-87)",
        script: [
            {r:"Tom", g:"m", t:"Hi Lan. I'm doing a survey about films. Can I ask you some questions?"},
            {r:"Lan", g:"f", t:"Sure. Go ahead."},
            {r:"Tom", g:"m", t:"What kind of films do you like best?"},
            {r:"Lan", g:"f", t:"I love comedies."},
            {r:"Tom", g:"m", t:"What's the name of your favourite comedy?"},
            {r:"Lan", g:"f", t:"It's Dr Johnny."},
            {r:"Tom", g:"m", t:"Who stars in it?"},
            {r:"Lan", g:"f", t:"Bill Harris."},
            {r:"Tom", g:"m", t:"What do you think of it?"},
            {r:"Lan", g:"f", t:"It's very funny."},
            {r:"Tom", g:"m", t:"Thank you."}
        ],
        questions: [
            {q: "Ex 1: How to accept a suggestion?", vi: "C√°ch ch·∫•p nh·∫≠n l·ªùi g·ª£i √Ω?", opts: ["That's a great idea.", "I'd love to, but...", "No, thanks."], a: 0, exp: "'That's a great idea' expresses agreement."},
            {q: "Ex 1: How to decline a suggestion politely?", vi: "C√°ch t·ª´ ch·ªëi l·ªãch s·ª±?", opts: ["No way.", "I'd love to, but...", "Yes, let's go."], a: 1, exp: "'I'd love to, but...' is polite refusal."},
            
            {q: "Ex 3 (Survey): What kind of films does Lan like best?", vi: "Lan th√≠ch lo·∫°i phim n√†o nh·∫•t?", opts: ["Action", "Comedies", "Horror"], a: 1, exp: "Lan says: 'I love comedies.'"},
            {q: "Ex 3 (Survey): What is the name of her favourite comedy?", vi: "T√™n phim h√†i y√™u th√≠ch?", opts: ["Dr Johnny", "Mr Bean", "Funny World"], a: 0, exp: "Lan says: 'It's Dr Johnny.'"},
            {q: "Ex 3 (Survey): Who stars in it?", vi: "Ai ƒë√≥ng vai ch√≠nh?", opts: ["Tom Cruise", "Bill Harris", "Brad Pitt"], a: 1, exp: "Lan says: 'Bill Harris.'"},
            {q: "Ex 3 (Survey): What does she think of it?", vi: "C√¥ ·∫•y nghƒ© g√¨ v·ªÅ n√≥?", opts: ["It's boring", "It's scary", "It's very funny"], a: 2, exp: "Lan says: 'It's very funny.'"}
        ]
    },
    {
        id: "p5",
        title: "5. Skills 1 (Reading)",
        desc: "Harry Potter Review (Page 87-88)",
        reading: `
            <p><strong>Harry Potter and the Sorcerer's Stone</strong> is a fantasy. It is the first of the Harry Potter film series. Daniel Radcliffe is one of the stars in the film.</p>
            <p>The film tells the story of Harry Potter. He's a powerful wizard. He is a student at a school for wizards and learns about himself, his family, and the bad things happening around him.</p>
            <p>The film received a lot of good reviews. People say it's a must-see for teens. I agree because the story is gripping and the acting is excellent. The music is also amazing.</p>
            <p>Although Harry Potter and the Sorcerer's Stone is a little frightening at times, it is very interesting and full of action. Go and see it if you can.</p>
        `,
        questions: [
            {q: "Ex 2 (Match): 'Series' means...", vi: "'Series' nghƒ©a l√†...", opts: ["A powerful man", "Related films/stories", "A single film"], a: 1, exp: "Series = Lo·∫°t phim/truy·ªán."},
            {q: "Ex 2 (Match): 'Wizard' means...", vi: "'Wizard' nghƒ©a l√†...", opts: ["A man with magic powers", "A teacher", "A normal student"], a: 0, exp: "Wizard = Ph√π th·ªßy."},
            {q: "Ex 2 (Match): 'Must-see' means...", vi: "'Must-see' nghƒ©a l√†...", opts: ["Don't watch", "Highly recommended", "Boring film"], a: 1, exp: "Must-see = ƒê√°ng xem."},
            {q: "Ex 2 (Match): 'Gripping' means...", vi: "'Gripping' nghƒ©a l√†...", opts: ["Very exciting/interesting", "Very boring", "Very sad"], a: 0, exp: "Gripping = L√¥i cu·ªën, h·∫•p d·∫´n."},

            {q: "Ex 3: What kind of film is Harry Potter?", vi: "Harry Potter l√† lo·∫°i phim g√¨?", opts: ["Fantasy", "Horror", "Comedy"], a: 0, exp: "Text: '...is a fantasy'."},
            {q: "Ex 3: Who is Daniel Radcliffe?", vi: "Daniel Radcliffe l√† ai?", opts: ["The director", "One of the stars", "A wizard"], a: 1, exp: "Text: 'Daniel Radcliffe is one of the stars'."},
            {q: "Ex 3: What is the film about?", vi: "Phim n√≥i v·ªÅ g√¨?", opts: ["A teacher", "A powerful wizard", "A normal boy"], a: 1, exp: "Text: 'The story of Harry Potter, a powerful wizard'."},
            {q: "Ex 3: What do people say about the film?", vi: "M·ªçi ng∆∞·ªùi n√≥i g√¨ v·ªÅ phim?", opts: ["It is boring", "It is a must-see", "It is silly"], a: 1, exp: "Text: 'People say it's a must-see'."}
        ]
    },
    {
        id: "p6",
        title: "6. Skills 2 (Listening)",
        desc: "Naughty Twins (Page 89)",
        script: [
            {r:"Mark", g:"m", t:"Hoa, have you seen the film Naughty Twins?"},
            {r:"Hoa", g:"f", t:"Not yet. Is it a comedy?"},
            {r:"Mark", g:"m", t:"Yes, it is. It's about two sisters, twin sisters."},
            {r:"Hoa", g:"f", t:"Who stars in it?"},
            {r:"Mark", g:"m", t:"Lindsay Lohan. She plays both twins."},
            {r:"Hoa", g:"f", t:"Wow! What is it about?"},
            {r:"Mark", g:"m", t:"They meet for the first time at a summer camp and make a plan to bring their parents back together."},
            {r:"Hoa", g:"f", t:"Sounds interesting."},
            {r:"Mark", g:"m", t:"Reviews say it's a must-see for young people."}
        ],
        questions: [
            {q: "Ex 3: 'Naughty Twins' is a ______.", vi: "'Naughty Twins' l√† phim...", opts: ["comedy", "sci-fi", "horror"], a: 0, exp: "Mark x√°c nh·∫≠n 'Yes' khi Hoa h·ªèi 'Is it a comedy?'."},
            {q: "Ex 3: The main characters are ______.", vi: "Nh√¢n v·∫≠t ch√≠nh l√†...", opts: ["old classmates", "twin brothers", "twin sisters"], a: 2, exp: "Mark: 'It's about... twin sisters'."},
            {q: "Ex 3: Where do they meet for the first time?", vi: "H·ªç g·∫∑p nhau l·∫ßn ƒë·∫ßu ·ªü ƒë√¢u?", opts: ["At a summer camp", "At a school", "At a hospital"], a: 0, exp: "Mark: 'They meet... at a summer camp'."},
            {q: "Ex 3: People say the film is ______.", vi: "M·ªçi ng∆∞·ªùi n√≥i phim...", opts: ["shocking", "a must-see for young people", "boring"], a: 1, exp: "Mark: 'Reviews say it's a must-see for young people'."}
        ]
    },
    {
        id: "p7",
        title: "7. Looking Back",
        desc: "Review (Page 90)",
        questions: [
            {q: "Ex 1 (Match): Sci-fi film", vi: "Phim khoa h·ªçc vi·ªÖn t∆∞·ªüng", opts: ["Makes you laugh", "Life in the future/space", "Frightening"], a: 1, exp: "Sci-fi = Future/Space/Robots."},
            {q: "Ex 1 (Match): Horror film", vi: "Phim kinh d·ªã", opts: ["Frightening", "Funny", "Real life info"], a: 0, exp: "Horror = Frightening."},
            {q: "Ex 1 (Match): Documentary", vi: "Phim t√†i li·ªáu", opts: ["Supernatural", "Gives useful facts/info", "Future life"], a: 1, exp: "Documentary = Facts/Info."},
            {q: "Ex 1 (Match): Comedy", vi: "Phim h√†i", opts: ["Makes you laugh", "Makes you cry", "Scary"], a: 0, exp: "Comedy = Laugh."},
            {q: "Ex 1 (Match): Fantasy", vi: "Phim gi·∫£ t∆∞·ªüng", opts: ["Real events", "Supernatural events", "Funny events"], a: 1, exp: "Fantasy = Supernatural/Imagination."},

            {q: "Ex 3: The film was long and ______. People went home early.", vi: "Phim d√†i v√† ___. M·ªçi ng∆∞·ªùi v·ªÅ s·ªõm.", opts: ["funny", "shocking", "dull"], a: 2, exp: "Dull = Boring."},
            {q: "Ex 3: The film is too ______ with fighting and killing.", vi: "Phim qu√° ___ v·ªõi c·∫£nh ƒë√°nh nhau.", opts: ["violent", "funny", "interesting"], a: 0, exp: "Fighting/Killing -> Violent."},
            {q: "Ex 3: A ______ story makes us feel afraid.", vi: "C√¢u chuy·ªán ___ l√†m ta s·ª£.", opts: ["moving", "frightening", "funny"], a: 1, exp: "Afraid -> Frightening."},
            {q: "Ex 3: The news was ______. I couldn't believe it.", vi: "Tin t·ª©c ___. T√¥i kh√¥ng tin n·ªïi.", opts: ["shocking", "confusing", "dull"], a: 0, exp: "Couldn't believe -> Shocking."},
            {q: "Ex 3: ______ films often make us cry.", vi: "Phim ___ th∆∞·ªùng l√†m ta kh√≥c.", opts: ["Moving", "Funny", "Boring"], a: 0, exp: "Cry -> Moving."},

            {q: "Ex 4: Although he arrived late, ______.", vi: "D√π ƒë·∫øn mu·ªôn...", opts: ["he left early", "he left the cinema early", "he watched the full film"], a: 1, exp: "Match: 'he left the cinema early'."},
            {q: "Ex 4: The film got good reviews. ______", vi: "Phim ƒë∆∞·ª£c khen...", opts: ["However, few people saw it", "So everyone saw it", "Because it was good"], a: 0, exp: "Contrast: Good reviews BUT few viewers."},
            {q: "Ex 4: Though tickets are expensive, ______.", vi: "D√π v√© ƒë·∫Øt...", opts: ["no one buys them", "people still buy them", "the cinema is empty"], a: 1, exp: "Contrast: Expensive BUT still buy."},
            {q: "Ex 4: Cinema tickets are expensive. ______", vi: "V√© ƒë·∫Øt...", opts: ["However, the number of people going is increasing", "So no one goes", "Because it is fun"], a: 0, exp: "Contrast idea."},
            {q: "Ex 4: Although I don't really like cinema, ______.", vi: "D√π t√¥i kh√¥ng th√≠ch r·∫°p phim...", opts: ["I stay home", "I don't want to stay home tonight", "I hate films"], a: 1, exp: "Match: 'I don't want to stay home tonight'."}
        ]
    }
];

// --- JAVASCRIPT LOGIC ---
let currentPartIdx = 0;
let userAnswers = {}; // L∆∞u ƒë√°p √°n ng∆∞·ªùi d√πng

document.addEventListener('DOMContentLoaded', () => {
    renderNav();
    loadPart(0);
});

// Render Navigation
function renderNav() {
    const nav = document.getElementById('navBar');
    nav.innerHTML = UNIT_DATA.map((p, idx) => 
        `<button class="nav-item ${idx===0?'active':''}" onclick="loadPart(${idx})">${p.title}</button>`
    ).join('');
}

// Load Section
function loadPart(idx) {
    currentPartIdx = idx;
    const part = UNIT_DATA[idx];
    const container = document.getElementById('mainContent');
    container.innerHTML = ""; // Clear old content

    // Update Nav Active State
    document.querySelectorAll('.nav-item').forEach((btn, i) => {
        btn.classList.toggle('active', i === idx);
    });

    // 1. Header Section
    container.innerHTML += `
        <div class="section-box">
            <div class="sec-title">${part.title}</div>
            <div class="sec-desc">${part.desc}</div>
        </div>
    `;

    // 2. Audio Script (N·∫øu c√≥)
    if (part.script) {
        let scriptHtml = part.script.map(line => 
            `<div class="dialogue-line"><span class="char">${line.r}:</span>${line.t}</div>`
        ).join('');
        
        container.innerHTML += `
            <div class="content-block">
                <div class="audio-controls">
                    <button class="btn-audio" onclick="playAudio(${idx})">‚ñ∂</button>
                    <strong>Nghe ƒëo·∫°n h·ªôi tho·∫°i (AI Voice)</strong>
                </div>
                ${scriptHtml}
            </div>
        `;
    }

    // 3. Reading Text (N·∫øu c√≥)
    if (part.reading) {
        container.innerHTML += `
            <div class="content-block">
                <strong>üìñ READING TEXT:</strong><br><br>${part.reading}
            </div>
        `;
    }

    // 4. Questions
    let qHtml = `<div class="section-box">`;
    part.questions.forEach((q, qIdx) => {
        const qKey = `${part.id}_${qIdx}`;
        qHtml += `
            <div class="q-item" id="q_${qKey}">
                <div class="q-main">${q.q}</div>
                <div class="q-vi">${q.vi}</div>
                <div class="opt-grid">
                    ${q.opts.map((opt, oIdx) => `
                        <button class="opt-btn" id="opt_${qKey}_${oIdx}" onclick="select('${part.id}', ${qIdx}, ${oIdx})">
                            ${String.fromCharCode(65+oIdx)}. ${opt}
                        </button>
                    `).join('')}
                </div>
                <div class="feedback" id="fb_${qKey}"></div>
            </div>
        `;
    });
    qHtml += `</div>`;
    container.innerHTML += qHtml;

    // Restore answers if any
    restoreState(part.id);
}

// User Action: Select Answer
function select(pId, qIdx, oIdx) {
    if (!userAnswers[pId]) userAnswers[pId] = {};
    userAnswers[pId][qIdx] = oIdx;

    const qKey = `${pId}_${qIdx}`;
    // Update UI
    document.querySelectorAll(`#q_${qKey} .opt-btn`).forEach(btn => btn.classList.remove('selected'));
    document.getElementById(`opt_${qKey}_${oIdx}`).classList.add('selected');
}

// Restore UI State
function restoreState(pId) {
    if (!userAnswers[pId]) return;
    for (const [qIdx, oIdx] of Object.entries(userAnswers[pId])) {
        const el = document.getElementById(`opt_${pId}_${qIdx}_${oIdx}`);
        if(el) el.classList.add('selected');
    }
}

// Check Answers
function checkAnswers() {
    const part = UNIT_DATA[currentPartIdx];
    let correctCount = 0;

    part.questions.forEach((q, qIdx) => {
        const qKey = `${part.id}_${qIdx}`;
        const userChoice = userAnswers[part.id] ? userAnswers[part.id][qIdx] : undefined;
        const fb = document.getElementById(`fb_${qKey}`);
        
        // Clear old styles
        document.querySelectorAll(`#q_${qKey} .opt-btn`).forEach(btn => {
            btn.classList.remove('correct', 'wrong');
        });

        fb.style.display = 'block';

        if (userChoice === undefined) {
            fb.className = 'feedback is-wrong';
            fb.innerHTML = '‚ö†Ô∏è B·∫°n ch∆∞a ch·ªçn ƒë√°p √°n.';
        } else if (userChoice === q.a) {
            correctCount++;
            document.getElementById(`opt_${qKey}_${userChoice}`).classList.add('correct');
            fb.className = 'feedback is-correct';
            fb.innerHTML = `<b>‚úÖ Ch√≠nh x√°c!</b><br>${q.exp}`;
        } else {
            document.getElementById(`opt_${qKey}_${userChoice}`).classList.add('wrong');
            document.getElementById(`opt_${qKey}_${q.a}`).classList.add('correct');
            fb.className = 'feedback is-wrong';
            fb.innerHTML = `<b>‚ùå Sai r·ªìi!</b> ƒê√°p √°n ƒë√∫ng: ${String.fromCharCode(65+q.a)}<br><em>${q.exp}</em>`;
        }
    });

    // Update score
    updateScore();
}

function updateScore() {
    let totalQ = 0;
    let totalC = 0;
    UNIT_DATA.forEach(p => {
        if(userAnswers[p.id]) {
            p.questions.forEach((q, i) => {
                totalQ++;
                if(userAnswers[p.id][i] === q.a) totalC++;
            });
        }
    });
    document.getElementById('scoreDisplay').innerText = `ƒêi·ªÉm: ${totalC}`;
}

// Toggle Translation
function toggleTrans() {
    document.body.classList.toggle('show-trans');
}

// Audio Player (Text-to-Speech)
function playAudio(idx) {
    if (!window.speechSynthesis) { alert("Tr√¨nh duy·ªát c·ªßa b·∫°n kh√¥ng h·ªó tr·ª£ ƒë·ªçc vƒÉn b·∫£n."); return; }
    window.speechSynthesis.cancel();
    
    const lines = UNIT_DATA[idx].script;
    let i = 0;

    function speakNext() {
        if (i >= lines.length) return;
        const line = lines[i];
        const u = new SpeechSynthesisUtterance(line.t);
        u.lang = 'en-US';
        u.rate = 0.9; // H∆°i ch·∫≠m ƒë·ªÉ d·ªÖ nghe

        // Ch·ªçn gi·ªçng
        const voices = window.speechSynthesis.getVoices();
        // Gi·ªçng N·ªØ (Female) cho Mi, Lan, Hoa
        if (['Mi', 'Lan', 'Hoa', 'Anna'].includes(line.r)) {
            const f = voices.find(v => v.name.includes("Female") || v.name.includes("Google US English"));
            if(f) u.voice = f;
            u.pitch = 1.1; 
        } 
        // Gi·ªçng Nam (Male) cho Mark, Tom, Minh
        else {
            const m = voices.find(v => v.name.includes("Male") || v.name.includes("Microsoft David"));
            if(m) u.voice = m;
            u.pitch = 0.9;
        }

        u.onend = () => { i++; speakNext(); };
        window.speechSynthesis.speak(u);
    }
    speakNext();
}

// Preload voices
window.speechSynthesis.onvoiceschanged = () => window.speechSynthesis.getVoices();

</script>
</body>
</html>